(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t){e.exports="data:image/png;base64,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"},20:function(e,t,a){e.exports=a.p+"static/media/loading.4cbcfda3.gif"},22:function(e,t,a){e.exports=a(36)},27:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(18),c=a.n(r),s=a(9),l=a(4),i=a(5),u=a(7),d=a(6),h=a(8),m=(a(27),a(0)),A=a(19),b=a.n(A),f=a(15),p="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:k},g=function(){return fetch("".concat(p,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books}).catch(function(e){})},y=function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(f.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){return e.json()}).catch(function(e){})},E=function(e){return fetch("".concat(p,"/search"),{method:"POST",headers:Object(f.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books}).catch(function(e){})},O=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1},a.requestBookUpdate=function(e,t){a.setState({loading:!0}),y(e,t).then(function(n){if(n&&!n.error){var o=Object.assign({},e);o.shelf=t,a.setState({loading:!1}),a.props.onUpdate(o)}else a.setState({loading:!1}),alert("An error occured. Please try it again.")})},a.cutStringByCapital=function(e){var t;return/[A-Z]/.test(e)?e.replace(/[A-Z]/,function(e,a,n){t=n.substr(0,a).toUpperCase()}):t=e.toUpperCase(),t},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.book;return o.a.createElement("li",null,o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover-wrapper"},t.imageLinks?o.a.createElement("div",{className:"book-cover",style:{backgroundImage:'url("'.concat(t.imageLinks.smallThumbnail,'")')}}):o.a.createElement("div",{className:"book-cover",style:{background:"url(".concat(b.a,") center/100px no-repeat")}}),this.state.loading&&o.a.createElement("div",{className:"book-cover-loading"}),"/search"===window.location.pathname&&t.shelf&&"none"!==t.shelf&&o.a.createElement("div",{className:"book-cover-mark"},this.cutStringByCapital(t.shelf))),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement("form",null,o.a.createElement("select",{value:t.shelf?t.shelf:"none",onChange:function(a){return e.requestBookUpdate(t,a.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None"))))),o.a.createElement("div",{className:"book-title"},t.title),t.authors&&t.authors.map(function(e,t){return o.a.createElement("div",{className:"book-authors",key:t},e)})))}}]),t}(o.a.Component),j=a(20),q=a.n(j);function X(e){var t=e.loading;return o.a.createElement("div",null,t?o.a.createElement("img",{src:q.a,alt:"loading",width:"150px"}):o.a.createElement("p",null,"No books available"))}var B=function(e){var t=e.books,a=e.category,n=e.onUpdate,r=e.loading,c=t.length>0&&t.filter(function(e){return e.shelf.toLowerCase()===a.toLowerCase().replace(/ /g,"")});return o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"".concat(a," (").concat(c&&c.length>0?c.length:0,")")),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},c&&c.length>0?c.map(function(e){return o.a.createElement(O,{key:e.id,book:e,onUpdate:n})}):o.a.createElement(X,{loading:r}))))},S=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={error:null},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.error?o.a.createElement("p",{style:{textAlign:"center",marginTop:"50px"}},"An error occured. Please try it again."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),t}(n.Component),N=["Currently Reading","Want to Read","Read"],V=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1},a.fetchBooks=function(){a.setState({loading:!0}),g().then(function(e){a.props.onAddBooks(e),a.setState({loading:!1}),localStorage.setItem("books",JSON.stringify(e))})},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.fetchBooks()}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement(S,null,N.map(function(t,a){return o.a.createElement(B,{books:e.props.books,loading:e.state.loading,onUpdate:e.props.onUpdate,category:t,key:a})})),o.a.createElement("div",{className:"open-search"},o.a.createElement(s.b,{to:"/search"},o.a.createElement("button",null,"Add a book")))))}}]),t}(o.a.Component),R=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={query:"",loading:!1,error:!1},a.handleChange=function(e){a.setState({query:e.target.value})},a.handleSubmit=function(e){var t=e.target.value.trim();a.isValidate(t)?a.searchBooks(t):alert("Please check the keyword.")},a.handleFormReset=function(){a.setState({query:""})},a.isValidate=function(e){if(/[(a-zA-Z0-9)]/gi.test(e))return!0},a.searchBooks=function(e){a.props.onReset(),a.setState({loading:!0}),E(e).then(function(e){e&&"empty query"===e.error?a.props.onReset():e?(a.sortBooks(e),a.props.onAddBooks(e)):a.setState({error:!0}),a.setState({loading:!1})})},a.sortBooks=function(e){var t=JSON.parse(localStorage.getItem("books")),a=!0,n=!1,o=void 0;try{for(var r,c=e[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){var s=r.value,l=!0,i=!1,u=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var m=d.value;s.id===m.id&&(s.shelf=m.shelf)}}catch(A){i=!0,u=A}finally{try{l||null==h.return||h.return()}finally{if(i)throw u}}}}catch(A){n=!0,o=A}finally{try{a||null==c.return||c.return()}finally{if(n)throw o}}return e},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.onReset()}},{key:"render",value:function(){var e=this,t=this.props,a=t.books,n=t.onUpdate,r=t.onReset;return o.a.createElement("div",{className:"search-books"},o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(s.b,{to:"/"},o.a.createElement("button",{className:"close-search",onClick:r},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:this.handleChange,onClick:this.handleFormReset,value:this.state.query,onKeyDown:function(t){return"Enter"===t.key&&e.handleSubmit(t)}}))),this.state.error?o.a.createElement("p",{style:{textAlign:"center",marginTop:"80px"}},"An error occured. Please try it again."):o.a.createElement("div",{className:"search-books-results"},o.a.createElement("ol",{className:"books-grid"},a.length>0?a.map(function(e){return o.a.createElement(O,{book:e,key:e.id,onUpdate:n})}):o.a.createElement(X,{loading:this.state.loading}))))}}]),t}(o.a.Component),w=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={books:[]},a.handleResetBooks=function(){a.setState({books:[]})},a.addBooks=function(e){a.setState({books:e})},a.updateBook=function(e){a.setState(function(t){return{books:t.books.filter(function(t){return t.id!==e.id}).concat([e])}}),localStorage.setItem("books",JSON.stringify(a.state.books))},a}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state.books;return o.a.createElement("div",{className:"app"},o.a.createElement(m.a,{exact:!0,path:"/",render:function(){return o.a.createElement(V,{books:t,onAddBooks:e.addBooks,onUpdate:e.updateBook})}}),o.a.createElement(m.a,{path:"/search",render:function(){return o.a.createElement(R,{books:t,onReset:e.handleResetBooks,onAddBooks:e.addBooks,onUpdate:e.updateBook})}}))}}]),t}(o.a.Component);a(34);c.a.render(o.a.createElement(s.a,null,o.a.createElement(w,null)),document.getElementById("root"))}},[[22,2,1]]]);
//# sourceMappingURL=main.e6eaade2.chunk.js.map